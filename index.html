<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Wepin SDK 테스트</title>
  <!-- Wepin SDK 로드 -->
  <script src="https://cdn.jsdelivr.net/npm/@wepin/widget-sdk@0.0.2-alpha/dist/wepin-widget-sdk.js" defer></script>
</head>
<body>
  <button id="loginBtn">Wepin 로그인</button>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const waitForWepin = setInterval(() => {
      if (typeof window.Wepin !== 'undefined') {
        clearInterval(waitForWepin);
        runWepin();
      }
    }, 200);
  });

  async function runWepin() {
    try {
      await window.Wepin.init(
        '82c1a61d6e45f0c580aed1fa2c422287',
        'ak_live_M3OBCVipGupiZWOhLbQSLEDB72be3dzBg5nvscrmHjV',
        {
          type: 'hide',
          defaultLanguage: 'ko',
          defaultCurrency: 'KRW',
          loginProviders: ['google', 'kakao']
        }
      );

      document.getElementById('loginBtn').addEventListener('click', async () => {
        try {
          const userInfo = await window.Wepin.login();
          console.log('로그인 성공:', userInfo);
        } catch (loginError) {
          console.error('로그인 실패:', loginError);
        }
      });
    } catch (initError) {
      console.error('SDK 초기화 실패:', initError);
    }
  }
</script>

</body>
</html>
